# р╕Др╕╣р╣Ир╕бр╕╖р╕н: smartspec_refactor_planner

## ЁЯУЪ р╕ар╕▓р╕Юр╕гр╕зр╕б

`/smartspec_refactor_planner` р╣Ар╕Ыр╣Зр╕Щ workflow р╕Чр╕╡р╣Ир╕нр╕╕р╕Чр╕┤р╕ир╣Гр╕лр╣Йр╕Бр╕▒р╕Ър╕Бр╕▓р╕гр╕Ыр╕гр╕▒р╕Ър╕Ыр╕гр╕╕р╕Зр╕Др╕╕р╕Ур╕ар╕▓р╕Юр╣Вр╕Др╣Йр╕Фр╣Вр╕Фр╕вр╕Бр╕▓р╕гр╕Хр╕гр╕зр╕Ир╕Ир╕▒р╕Ъ code smells, р╕гр╕░р╕Ър╕╕р╣Вр╕нр╕Бр╕▓р╕кр╣Гр╕Щр╕Бр╕▓р╕г refactor р╣Бр╕ер╕░р╕кр╕гр╣Йр╕▓р╕Зр╣Бр╕Ьр╕Щр╕Бр╕▓р╕г implement р╣Вр╕Фр╕вр╕ер╕░р╣Ар╕нр╕╡р╕вр╕Фр╣Вр╕Фр╕вр╕нр╕▒р╕Хр╣Вр╕Щр╕бр╕▒р╕Хр╕┤

**р╕Др╕зр╕▓р╕бр╕кр╕▓р╕бр╕▓р╕гр╕Цр╕лр╕ер╕▒р╕Б:**
- тЬЕ р╕кр╣Бр╕Бр╕Щ codebase р╣Ар╕Юр╕╖р╣Ир╕нр╕лр╕▓ code smells р╕Чр╕▒р╣Ир╕зр╣Др╕Ы (р╣Ар╕Кр╣Ир╕Щ long methods, large classes, duplicated code)
- тЬЕ р╕гр╕░р╕Ър╕╕ architectural patterns р╣Бр╕ер╕░ anti-patterns
- тЬЕ р╣Бр╕Щр╕░р╕Щр╕│р╣Вр╕нр╕Бр╕▓р╕кр╣Гр╕Щр╕Бр╕▓р╕г refactor р╕Юр╕гр╣Йр╕нр╕бр╣Ар╕лр╕Хр╕╕р╕Ьр╕ер╕Чр╕╡р╣Ир╕Кр╕▒р╕Фр╣Ар╕Ир╕Щ
- тЬЕ р╕кр╕гр╣Йр╕▓р╕Зр╣Бр╕Ьр╕Щр╕Бр╕▓р╕г refactor р╕Юр╕гр╣Йр╕нр╕бр╕Др╕│р╣Бр╕Щр╕░р╕Щр╕│р╕Чр╕╡р╕ер╕░р╕Вр╕▒р╣Йр╕Щр╕Хр╕нр╕Щ
- тЬЕ р╕кр╕гр╣Йр╕▓р╕З tasks р╕кр╕│р╕лр╕гр╕▒р╕Ър╕Зр╕▓р╕Щ refactor р╣Гр╕Щ `tasks.md`

---

## ЁЯОп р╕Бр╕▓р╕гр╣Гр╕Кр╣Йр╕Зр╕▓р╕Щр╕Юр╕╖р╣Йр╕Щр╕Рр╕▓р╕Щ

workflow р╕Щр╕╡р╣Йр╕кр╕▓р╕бр╕▓р╕гр╕Цр╕гр╕▒р╕Щр╣Др╕Фр╣Йр╕Хр╕▓р╕бр╕Др╕зр╕▓р╕бр╕Хр╣Йр╕нр╕Зр╕Бр╕▓р╕гр╣Вр╕Фр╕вр╕Щр╕▒р╕Бр╕Юр╕▒р╕Тр╕Щр╕▓р╕лр╕гр╕╖р╕нр╕кр╕Цр╕▓р╕Ыр╕Щр╕┤р╕Б

### р╕Бр╕▓р╕гр╕гр╕▒р╕Щ Analysis

```bash
/smartspec_refactor_planner --run-analysis --scope src/core/
```

**р╕Юр╕др╕Хр╕┤р╕Бр╕гр╕гр╕б:**
1.  р╕зр╕┤р╣Ар╕Др╕гр╕▓р╕░р╕лр╣Мр╣Вр╕Др╣Йр╕Фр╣Гр╕Щр╣Др╕Фр╣Ар╕гр╕Бр╕Чр╕нр╕гр╕╡ `src/core/`
2.  р╕кр╕гр╣Йр╕▓р╕Зр╕гр╕▓р╕вр╕Зр╕▓р╕Щр╣Гр╕Щ `.spec/reports/refactoring/` р╕Юр╕гр╣Йр╕нр╕бр╣Вр╕нр╕Бр╕▓р╕кр╕Чр╕╡р╣Ир╕гр╕░р╕Ър╕╕

### р╕Бр╕▓р╕гр╕кр╕гр╣Йр╕▓р╕З Tasks р╕кр╕│р╕лр╕гр╕▒р╕Ъ Refactor

```bash
/smartspec_refactor_planner --run-analysis --apply --min-impact high
```

**р╕Юр╕др╕Хр╕┤р╕Бр╕гр╕гр╕б:**
1.  р╕гр╕▒р╕Щр╕Бр╕▓р╕гр╕зр╕┤р╣Ар╕Др╕гр╕▓р╕░р╕лр╣Мр╕Ър╕Щ codebase р╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Ф
2.  р╕кр╕гр╣Йр╕▓р╕Зр╕гр╕▓р╕вр╕Зр╕▓р╕Щ
3.  р╕кр╕гр╣Йр╕▓р╕Зр╣Др╕Яр╕ер╣М `tasks.md` р╕Юр╕гр╣Йр╕нр╕б tasks р╕кр╕│р╕лр╕гр╕▒р╕Ър╣Вр╕нр╕Бр╕▓р╕кр╣Гр╕Щр╕Бр╕▓р╕г refactor р╕Чр╕╡р╣Ир╕бр╕╡р╕Ьр╕ер╕Бр╕гр╕░р╕Чр╕Ър╕кр╕╣р╕Зр╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Ф

---

## тЪЩя╕П р╕зр╕Зр╕Ир╕г Workflow

1.  **р╕зр╕┤р╣Ар╕Др╕гр╕▓р╕░р╕лр╣М:** workflow р╕кр╣Бр╕Бр╕Щ codebase р╣Ар╕Юр╕╖р╣Ир╕нр╕лр╕▓ code smells
2.  **р╕гр╕░р╕Ър╕╕:** р╕гр╕░р╕Ър╕╕р╣Бр╕ер╕░р╕Ир╕▒р╕Фр╕ер╕│р╕Фр╕▒р╕Ър╕Др╕зр╕▓р╕бр╕кр╕│р╕Др╕▒р╕Нр╕Вр╕нр╕Зр╣Вр╕нр╕Бр╕▓р╕кр╣Гр╕Щр╕Бр╕▓р╕г refactor
3.  **р╕зр╕▓р╕Зр╣Бр╕Ьр╕Щ:** р╕кр╕гр╣Йр╕▓р╕Зр╣Бр╕Ьр╕Щр╕Бр╕▓р╕г refactor р╣Вр╕Фр╕вр╕ер╕░р╣Ар╕нр╕╡р╕вр╕Ф
4.  **р╕кр╕гр╣Йр╕▓р╕З Task:** р╕Фр╣Йр╕зр╕в `--apply` р╕Ир╕░р╕кр╕гр╣Йр╕▓р╕Зр╣Др╕Яр╕ер╣М `tasks.md`
5.  **Implement:** р╕Щр╕▒р╕Бр╕Юр╕▒р╕Тр╕Щр╕▓р╣Гр╕Кр╣Йр╣Бр╕Ьр╕Щр╣Бр╕ер╕░ tasks р╣Ар╕Юр╕╖р╣Ир╕нр╕Чр╕│р╕Бр╕▓р╕г refactor

---

## ЁЯЪй Flags

- `--run-analysis`: **(р╕Ир╕│р╣Ар╕Ыр╣Зр╕Щ)** р╕гр╕▒р╕Щр╕Бр╕▓р╕гр╕зр╕┤р╣Ар╕Др╕гр╕▓р╕░р╕лр╣Мр╣Вр╕Др╣Йр╕Ф
- `--scope <path>`: р╕Ир╕│р╕Бр╕▒р╕Фр╕Бр╕▓р╕гр╕зр╕┤р╣Ар╕Др╕гр╕▓р╕░р╕лр╣Мр╣Ар╕Йр╕Юр╕▓р╕░р╣Др╕Фр╣Ар╕гр╕Бр╕Чр╕нр╕гр╕╡р╕лр╕гр╕╖р╕нр╣Др╕Яр╕ер╣Мр╕Чр╕╡р╣Ир╕гр╕░р╕Ър╕╕
- `--min-impact <level>`: р╕гр╕▓р╕вр╕Зр╕▓р╕Щр╣Ар╕Йр╕Юр╕▓р╕░р╣Вр╕нр╕Бр╕▓р╕кр╕Чр╕╡р╣Ир╕бр╕╡р╕гр╕░р╕Фр╕▒р╕Ър╕Ьр╕ер╕Бр╕гр╕░р╕Чр╕Ър╕Вр╕▒р╣Йр╕Щр╕Хр╣Ир╕│ (р╣Ар╕Кр╣Ир╕Щ `medium`, `high`)
- `--auto-plan`: р╕кр╕гр╣Йр╕▓р╕Зр╣Бр╕Ьр╕Щр╕кр╕│р╕лр╕гр╕▒р╕Ър╣Вр╕нр╕Бр╕▓р╕кр╕Чр╕╡р╣Ир╕бр╕╡р╕Ьр╕ер╕Бр╕гр╕░р╕Чр╕Ър╕кр╕╣р╕Зр╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Фр╣Вр╕Фр╕вр╕нр╕▒р╕Хр╣Вр╕Щр╕бр╕▒р╕Хр╕┤
- `--apply`: р╕кр╕гр╣Йр╕▓р╕Зр╣Др╕Яр╕ер╣М `tasks.md` р╕Юр╕гр╣Йр╕нр╕б tasks р╕кр╕│р╕лр╕гр╕▒р╕Ъ refactor
