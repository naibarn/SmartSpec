_**หมายเหตุ:** นี่คือคู่มือการใช้งานสำหรับเวิร์กโฟลว์ `smartspec_manage_theme` สำหรับคำจำกัดความทางเทคนิคของเวิร์กโฟลว์ โปรดดูที่ [`.smartspec/workflows/smartspec_manage_theme.md`](../../.smartspec/workflows/smartspec_manage_theme.md)_ 

# เวิร์กโฟลว์: smartspec_manage_theme

## 1. ภาพรวม

เวิร์กโฟลว์ `smartspec_manage_theme` เป็นเครื่องมือที่มีประสิทธิภาพสำหรับจัดการธีมของระบบการออกแบบ (design system) ของแอปพลิเคชัน A2UI ของคุณ มันมีวิธีการที่เป็นโครงสร้างและรวมศูนย์ในการกำหนด, อัปเดต, และตรวจสอบเอกลักษณ์ทางภาพของโปรเจกต์ของคุณ, ทำให้มั่นใจได้ถึงความสอดคล้องกันในทุกคอมโพเนนต์ UI ที่สร้างขึ้น เวิร์กโฟลว์นี้จำเป็นอย่างยิ่งสำหรับการรักษาประสบการณ์ผู้ใช้ที่สอดคล้องกันและทำให้กระบวนการส่งมอบงานจากฝ่ายออกแบบไปยังฝ่ายพัฒนานั้นราบรื่น

หัวใจหลักของเวิร์กโฟลว์นี้คือการทำงานกับไฟล์ `theme.json` ซึ่งทำหน้าที่เป็นแหล่งข้อมูลจริงเพียงแหล่งเดียว (single source of truth) สำหรับข้อมูลสไตล์ทั้งหมด ด้วยการรวมศูนย์ design tokens (เช่น สีและฟอนต์) และสไตล์ของคอมโพเนนต์ที่กำหนดไว้ล่วงหน้า (variants) คุณสามารถจัดการระบบการออกแบบของคุณได้อย่างมั่นใจและขยายขนาดได้

## 2. แนวคิดหลัก

เพื่อให้สามารถใช้งานเวิร์กโฟลว์นี้ได้อย่างมีประสิทธิภาพ สิ่งสำคัญคือต้องเข้าใจแนวคิดหลักบางประการ

### Design Tokens

Design tokens คือหน่วยข้อมูลพื้นฐานที่มีชื่อเรียกซึ่งเก็บค่าคุณลักษณะการออกแบบทางภาพของคุณ แทนที่จะเขียนค่าแบบตายตัว (hardcode) เช่น รหัสเลขฐานสิบหกสำหรับสี (เช่น `#0ea5e9`) คุณจะใช้การอ้างอิงโทเค็น (เช่น `{colors.primary.500}`) แทน การสร้างสิ่งที่เป็นนามธรรมนี้เป็นรากฐานของระบบการออกแบบที่สามารถขยายขนาดได้

**ข้อดีของการใช้ design tokens:**
- **ความสอดคล้อง:** ทำให้มั่นใจได้ว่ามีการใช้ค่าเดียวกันทั่วทั้งแอปพลิเคชัน, ช่วยขจัดความไม่สอดคล้องทางภาพ
- **การบำรุงรักษา:** การอัปเดตค่าของโทเค็นในที่เดียวจะส่งผลให้การเปลี่ยนแปลงนั้นถูกนำไปใช้กับทุกคอมโพเนนต์ที่อ้างอิงถึงมันโดยอัตโนมัติ, ทำให้การรีแบรนด์หรือการอัปเดตสไตล์เป็นเรื่องง่าย
- **ความสามารถในการขยายขนาด:** ทำให้การจัดการระบบการออกแบบที่ซับซ้อนง่ายขึ้นและทำให้การเพิ่มธีมใหม่ (เช่น dark mode) เป็นเรื่องง่าย

### `theme.json`

ไฟล์ `theme.json` เป็นหัวใจของระบบธีม มันเป็นไฟล์ JSON ที่มีโครงสร้างซึ่งประกอบด้วยสามส่วนหลัก:

1.  **`tokens`**: ชุดของ design tokens ของคุณที่จัดเรียงตามลำดับชั้น ซึ่งรวมถึงสี, ขนาดตัวอักษร, หน่วยของระยะห่าง, ความโค้งของขอบ, และเงา
2.  **`components`**: คลังของสไตล์คอมโพเนนต์ (variants) ที่กำหนดไว้ล่วงหน้า ตัวอย่างเช่น คุณสามารถกำหนดได้ว่าปุ่ม `primary` หรือการ์ด `elevated` จะมีลักษณะอย่างไร
3.  **`metadata`**: ข้อมูลเกี่ยวกับธีม เช่น เวอร์ชัน, ผู้สร้าง, และแหล่งที่มา ซึ่งมีประโยชน์สำหรับการติดตามและการบำรุงรักษา

### Component Variants

Component variants คือสไตล์ที่กำหนดไว้ล่วงหน้าสำหรับคอมโพเนนต์เฉพาะ ตัวอย่างเช่น คอมโพเนนต์ `button` อาจมี variants เป็น `primary`, `secondary`, และ `danger` ซึ่งแต่ละอันมีลักษณะที่แตกต่างกันซึ่งกำหนดไว้ใน `theme.json` variants เหล่านี้จะอ้างอิง design tokens สำหรับการกำหนดสไตล์

เมื่อสร้าง UI specifications คุณสามารถระบุ variant ที่ต้องการได้เลย (เช่น `variant: "primary"`) แทนที่จะต้องกำหนดสไตล์ทั้งหมดด้วยตนเอง ซึ่งไม่เพียงแต่ช่วยประหยัดเวลา แต่ยังบังคับใช้ความสอดคล้องของการออกแบบอีกด้วย

## 3. พารามิเตอร์

เวิร์กโฟลว์ `smartspec_manage_theme` ถูกควบคุมโดยชุดของพารามิเตอร์ที่ช่วยให้คุณสามารถดำเนินการต่างๆ กับธีมได้

### พารามิเตอร์ที่จำเป็น

| พารามิเตอร์ | ประเภท | คำอธิบาย |
| :--- | :--- | :--- |
| `--action` | string | การดำเนินการเฉพาะที่จะทำกับธีม นี่คือพารามิเตอร์หลักที่กำหนดพฤติกรรมของเวิร์กโฟลว์ |

### Actions

พารามิเตอร์ `--action` ยอมรับค่าต่อไปนี้:

| Action | คำอธิบาย |
| :--- | :--- |
| `init` | สร้างไฟล์ `theme.json` ใหม่พร้อมกับชุดของโทเค็นและ variants เริ่มต้น |
| `update-token` | อัปเดตค่าของ design token ที่ระบุ |
| `add-variant` | เพิ่ม variant ใหม่เข้าไปในคำจำกัดความสไตล์ของคอมโพเนนต์ |
| `remove-variant` | ลบ variant ที่มีอยู่ออกจากคอมโพเนนต์ |
| `validate` | ตรวจสอบความถูกต้องของ schema ของ `theme.json` และการอ้างอิงโทเค็นทั้งหมด |
| `export-css` | ส่งออก design tokens ของธีมเป็น CSS custom properties |
| `export-scss` | ส่งออก design tokens ของธีมเป็นตัวแปร SCSS |

### พารามิเตอร์ที่ไม่บังคับ

ความพร้อมใช้งานของพารามิเตอร์ที่ไม่บังคับขึ้นอยู่กับ action ที่เลือก

| พารามิเตอร์ | ประเภท | คำอธิบาย | จำเป็นสำหรับ |
| :--- | :--- | :--- | :--- |
| `--token-path` | string | เส้นทาง JSON ไปยังโทเค็น (เช่น `colors.primary.500`) | `update-token` |
| `--token-value` | string | ค่าใหม่สำหรับโทเค็น | `update-token` |
| `--component` | string | ชื่อของคอมโพเนนต์ (เช่น `button`) | `add-variant`, `remove-variant` |
| `--variant-name` | string | ชื่อของ variant (เช่น `outline`) | `add-variant`, `remove-variant` |
| `--variant-spec` | JSON string | ข้อกำหนด JSON ของสไตล์ของ variant | `add-variant` |
| `--output-file` | string | เส้นทางไฟล์เอาต์พุตสำหรับธีมที่ส่งออก | `export-css`, `export-scss` |
| `--theme-file` | string | เส้นทางไปยังไฟล์ `theme.json` ค่าเริ่มต้นคือ `.spec/theme.json` | ทุก actions |

## 4. ตัวอย่างการใช้งาน

นี่คือตัวอย่างการใช้งานจริงของเวิร์กโฟลว์ `smartspec_manage_theme`

### กรณีการใช้งานที่ 1: การเริ่มต้นธีมใหม่

เมื่อเริ่มโปรเจกต์ใหม่ คุณสามารถสร้างธีมเริ่มต้นเพื่อเริ่มต้นได้อย่างรวดเร็ว

**คำสั่ง:**
```bash
/smartspec_manage_theme --action init
```

**ผลลัพธ์:** ไฟล์ `theme.json` จะถูกสร้างขึ้นที่ `.spec/theme.json` พร้อมกับชุดของ design tokens และ component variants มาตรฐาน ซึ่งเป็นรากฐานที่มั่นคงสำหรับระบบการออกแบบของคุณ

### กรณีการใช้งานที่ 2: การอัปเดตสีของแบรนด์

ลองจินตนาการว่าสีหลักของแบรนด์ของคุณเปลี่ยนไป ด้วยระบบธีม นี่เป็นการเปลี่ยนแปลงง่ายๆ เพียงบรรทัดเดียว

**คำสั่ง:**
```bash
/smartspec_manage_theme \
  --action update-token \
  --token-path colors.primary.500 \
  --token-value "#a855f7" # สีม่วงใหม่
```

**ผลลัพธ์:** ค่าของโทเค็น `colors.primary.500` จะถูกอัปเดต คอมโพเนนต์ทั้งหมดที่อ้างอิงโทเค็นนี้จะใช้สีใหม่โดยอัตโนมัติ ทำให้มั่นใจได้ถึงการอัปเดตที่สอดคล้องกันทั่วทั้งแอปพลิเคชันของคุณ

### กรณีการใช้งานที่ 3: การเพิ่ม Button Variant แบบกำหนดเอง

สมมติว่าคุณต้องการสไตล์ปุ่ม "outline" ใหม่ที่ไม่มีในธีมเริ่มต้น

**คำสั่ง:**
```bash
/smartspec_manage_theme \
  --action add-variant \
  --component button \
  --variant-name outline \
  --variant-spec '{"backgroundColor": "transparent", "color": "{colors.primary.500}", "borderColor": "{colors.primary.500}"}'
```

**ผลลัพธ์:** variant `outline` ใหม่จะถูกเพิ่มเข้าไปในคอมโพเนนต์ `button` ใน `theme.json` ตอนนี้คุณสามารถใช้ `variant: "outline"` ใน UI specifications ของคุณเพื่อสร้างปุ่มที่มีสไตล์นี้ได้

### กรณีการใช้งานที่ 4: การตรวจสอบความถูกต้องของธีม

เพื่อให้แน่ใจว่าธีมของคุณมีรูปแบบที่ดีและการอ้างอิงโทเค็นทั้งหมดถูกต้อง คุณสามารถเรียกใช้ action การตรวจสอบได้

**คำสั่ง:**
```bash
/smartspec_manage_theme --action validate
```

**ผลลัพธ์:** เวิร์กโฟลว์จะตรวจสอบไฟล์ `theme.json` เพื่อให้สอดคล้องกับ schema และตรวจสอบว่าการอ้างอิงโทเค็นทั้งหมด (เช่น `{colors.primary.500}`) ชี้ไปยังโทเค็นที่ถูกต้อง มันจะรายงานข้อผิดพลาดหรือคำเตือนใดๆ ที่พบ

### กรณีการใช้งานที่ 5: การส่งออกสำหรับการพัฒนาเว็บ

หากต้องการใช้ design tokens ของคุณในโปรเจกต์เว็บแบบดั้งเดิม คุณสามารถส่งออกเป็นตัวแปร CSS ได้

**คำสั่ง:**
```bash
/smartspec_manage_theme \
  --action export-css \
  --output-file public/theme.css
```

**ผลลัพธ์:** ไฟล์ `theme.css` จะถูกสร้างขึ้นพร้อมกับ design tokens ทั้งหมดของคุณที่ถูกแปลงเป็น CSS custom properties ซึ่งสามารถนำไปใช้ใน stylesheets ของเว็บแอปพลิเคชันของคุณได้โดยตรง

## 5. เวิร์กโฟลว์ที่เกี่ยวข้อง

- **`smartspec_import_penpot_tokens`**: นำเข้า design tokens โดยตรงจากไฟล์ดีไซน์ของ Penpot, ช่วยเชื่อมช่องว่างระหว่างการออกแบบและโค้ด
- **`smartspec_generate_ui_spec`**: สร้าง A2UI specifications ที่สามารถอ้างอิง variants และ tokens ที่กำหนดไว้ในธีมของคุณ
- **`smartspec_validate_golden_tests`**: ใช้ไฟล์ธีมเพื่อตรวจสอบว่า A2UI JSON output อ้างอิง theme tokens อย่างถูกต้อง
