# Workflow: /smartspec_resolve_themes

**รวมไฟล์ธีมหลายไฟล์เป็นธีมเดียวที่แก้ไขแล้วตามลำดับชั้นที่ระบุ ทำให้สามารถสร้างธีมได้หลายระดับ**

---

## 1. ภาพรวม

เวิร์กโฟลว์นี้ใช้ระบบธีมแบบลำดับชั้นหลายระดับ ซึ่งเป็นแนวคิดหลักจาก `SPEC-UI-001` โดยจะรับธีมพื้นฐานและชุดของธีมที่จะมาแทนที่ จากนั้นทำการผสานแบบลึกเพื่อสร้างไฟล์ `theme.json` ที่แก้ไขแล้วเพียงไฟล์เดียว ซึ่งจำเป็นสำหรับการเปิดใช้งาน white-labeling, การสร้างแบรนด์เฉพาะบริษัท และการปรับแต่งส่วนบุคคลของผู้ใช้

## 2. หมวดหมู่

`ui_theming_and_design`

## 3. พารามิเตอร์

### พารามิเตอร์ที่จำเป็น

| พารามิเตอร์ | ประเภท | คำอธิบาย |
| :--- | :--- | :--- |
| `--base-theme` | string | เส้นทางไปยังไฟล์ธีมพื้นฐานหรือระดับระบบ (มีความสำคัญต่ำสุด) |
| `--override-themes` | list | สตริง JSON ที่แสดงรายการเส้นทางไปยังไฟล์ธีมที่จะมาแทนที่ธีมพื้นฐานตามลำดับ ธีมสุดท้ายในรายการมีความสำคัญสูงสุด |
| `--output-file` | string | เส้นทางที่จะบันทึกไฟล์ธีมที่ผสานเสร็จสิ้นแล้ว |

## 4. ตัวอย่างการใช้งาน

### แก้ไขธีมสำหรับผู้ใช้เฉพาะ

**คำสั่ง:**
```bash
/smartspec_resolve_themes \
  --base-theme "src/config/themes/system.theme.json" \
  --override-themes '[\
    "src/config/themes/company-acme.theme.json", \
    "src/config/themes/user-123.theme.json" \
  ]' \
  --output-file ".spec/resolved-theme.json"
```

**ผลลัพธ์:**
- ไฟล์ `resolved-theme.json` จะมีการรวมกันของธีมทั้งสาม ธีมใดๆ ที่มีอยู่ใน `user-123.theme.json` จะมีความสำคัญเหนือกว่า `company-acme.theme.json` ซึ่งในทางกลับกันจะมีความสำคัญเหนือกว่า `system.theme.json`

---

### สร้างธีมโหมดมืด

**คำสั่ง:**
```bash
/smartspec_resolve_themes \
  --base-theme "src/config/themes/system.theme.json" \
  --override-themes '["src/config/themes/dark-mode.theme.json"]' \
  --output-file "public/dark-theme.json"
```

**ผลลัพธ์:**
- `dark-theme.json` จะถูกสร้างขึ้น ซึ่งประกอบด้วยธีมระบบพื้นฐานพร้อมกับชุดสีโหมดมืดที่ผสานอยู่ด้านบน

## 5. หมายเหตุ

- พารามิเตอร์ `--override-themes` ต้องเป็นอาร์เรย์ JSON ของสตริงที่ถูกต้อง ใช้เครื่องหมายอัญประกาศเดี่ยวรอบอาร์กิวเมนต์ใน bash เพื่อป้องกันปัญหาการขยายเชลล์
- ตรรกะการผสานเป็นแบบลึก ซึ่งหมายความว่าออบเจกต์ที่ซ้อนกันจะถูกผสานแบบเรียกซ้ำ ซึ่งช่วยให้สามารถควบคุมการแก้ไขธีมได้อย่างละเอียด
- หากไม่พบไฟล์ธีมที่จะมาแทนที่ จะมีการพิมพ์คำเตือนและเวิร์กโฟลว์จะดำเนินต่อไป ซึ่งช่วยให้สามารถใช้ธีมที่เป็นทางเลือกได้ (เช่น ธีมผู้ใช้ที่อาจมีหรือไม่มีอยู่ก็ได้)
