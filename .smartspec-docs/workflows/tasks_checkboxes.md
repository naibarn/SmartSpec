# SmartSpec Workflow Manual
## `/smartspec_verify_tasks_progress` & `/smartspec_sync_tasks_checkboxes`
English Version

---
# 1. Overview
This workflow set provides *accurate, evidence-first progress tracking* for SmartSpec projects.
Instead of trusting checkboxes in `tasks.md`, these workflows analyze **real code, tests, documentation, and deployment artifacts** to determine true completion.

There are two workflows:

### âœ” `/smartspec_verify_tasks_progress`
Analyzes real implementation evidence and produces a detailed JSON/Markdown progress report.

### âœ” `/smartspec_sync_tasks_checkboxes`
Updates the checkboxes in `tasks.md` to match actual evidence.  
If a checked task has no code/test evidence, it is automatically unchecked.

---
# 2. Workflow 1 â€” `/smartspec_verify_tasks_progress`
## 2.1 Purpose
This workflow:
- Scans source code, routes, services
- Scans test folders (unit/integration/performance)
- Optionally runs tests (`--run-tests`)
- Optionally merges custom evidence scripts (`--evidence-script`)
- Determines true completion state using evidence-only evaluation
- Produces a detailed verdict per task

---
## 2.2 Common Usage
### â–¶ Run evidence-first verification
```bash
/smartspec_verify_tasks_progress \
  --spec specs/feature/spec-002-user-management/spec.md \
  --report-format=json --report=summary --dry-run \
  --evidence-script=scripts/check_tasks_evidence.py \
  > .spec/reports/verify-tasks-progress/spec-002.json
```
This generates a JSON report without writing the Markdown summary file.

---
## 2.3 Task Verdicts
Each task receives:
- `declared_status` â†’ checkbox in `tasks.md`
- `observed_evidence` â†’ none | partial | complete
- `verdict` â†’ one of:
  - `complete`
  - `unsynced_complete` (code exists but unchecked)
  - `false_positive` (checked but no evidence)
  - `partial`
  - `incomplete`

Progress percentage is computed from evidence, **not** from checkboxes.

---
# 3. Workflow 2 â€” `/smartspec_sync_tasks_checkboxes`
## 3.1 Purpose
This workflow updates `tasks.md` so that checkboxes reflect the evidence-only analysis.
It uses the JSON report generated by `/smartspec_verify_tasks_progress`.

---
## 3.2 Syncing Rules
| Verdict | Checkbox Result |
|--------|------------------|
| `complete` | `[x]` |
| `unsynced_complete` | `[x]` |
| `false_positive` | `[ ]` |
| `partial` | `[ ]` |
| `incomplete` | `[ ]` |

This ensures `tasks.md` always mirrors **true implementation status**.

---
## 3.3 Example Usage
### â–¶ Sync tasks.md using the latest verification evidence
```bash
/smartspec_sync_tasks_checkboxes \
  --tasks specs/feature/spec-002-user-management/tasks.md \
  --report .spec/reports/verify-tasks-progress/spec-002.json \
  --mode=safe
```

### â–¶ Preview changes only (no write)
```bash
/smartspec_sync_tasks_checkboxes \
  --tasks specs/.../tasks.md \
  --report .spec/reports/...json \
  --dry-run
```

---
# 4. Recommended Working Cycle (Standard Flow)
A best-practice workflow for accurate progress management:

### Step 1 â€” Implement tasks normally
Write real code, tests, docs.

### Step 2 â€” Run evidence-first verification
```bash
/smartspec_verify_tasks_progress --report-format=json
```

### Step 3 â€” Review JSON report
Check verdicts and missing evidence.

### Step 4 â€” Sync tasks.md
```bash
/smartspec_sync_tasks_checkboxes --mode=safe
```

### Step 5 â€” Inspect `tasks.md`
Checkboxes now represent **verified truth**, not manual guesses.

### Step 6 â€” Plan the next sprint with reliable data
Tasks that remain unchecked are guaranteed incomplete in code.

---
# 5. Important Notes
- This workflow **does not modify** SPEC_INDEX, registry files, UI JSON, or code.
- Only checkboxes inside `tasks.md` are updated.
- Evidence-first validation prevents misleading progress (e.g., developer checks `[x]` but never wrote code).

---
# 6. Need More?
I can also generate:
- Example evidence JSON reports
- A reference implementation for `check_tasks_evidence.py`
- CI/CD pipelines to auto-verify and auto-sync checkboxes on each commit

Just ask anytime! ðŸš€

