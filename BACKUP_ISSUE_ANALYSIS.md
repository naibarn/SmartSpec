# ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏õ‡∏±‡∏ç‡∏´‡∏≤ Backup File ‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏à‡∏£‡∏¥‡∏á

**‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà:** 2025-12-04  
**‡∏õ‡∏±‡∏ç‡∏´‡∏≤:** AI ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ß‡πà‡∏≤‡∏™‡∏£‡πâ‡∏≤‡∏á backup ‡πÅ‡∏•‡πâ‡∏ß ‡πÅ‡∏ï‡πà‡πÑ‡∏ü‡∏•‡πå‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏à‡∏£‡∏¥‡∏á

---

## ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏û‡∏ö

**Evidence ‡∏à‡∏≤‡∏Å Report:**
```
Backup: .smartspec/backups/spec.backup-20251204-000859.md
```

**‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö:**
- ‚ùå ‡πÑ‡∏ü‡∏•‡πå `spec.backup-20251204-000859.md` ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡∏à‡∏£‡∏¥‡∏á
- ‚úÖ AI ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ß‡πà‡∏≤‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏•‡πâ‡∏ß (‡πÉ‡∏ô report)
- ‚ùå AI ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ execute ‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏à‡∏£‡∏¥‡∏á

---

## ‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô‡πÑ‡∏õ‡πÑ‡∏î‡πâ

### 1. AI "‡∏ö‡∏≠‡∏Å" ‡πÅ‡∏ï‡πà‡πÑ‡∏°‡πà "‡∏ó‡∏≥"

**‡∏õ‡∏±‡∏ç‡∏´‡∏≤:**
- AI ‡∏≠‡πà‡∏≤‡∏ô workflow ‡πÅ‡∏•‡∏∞‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏ß‡πà‡∏≤‡∏Ñ‡∏ß‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á backup
- ‡πÅ‡∏ï‡πà‡πÅ‡∏ó‡∏ô‡∏ó‡∏µ‡πà‡∏à‡∏∞ execute ‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á AI ‡∏Å‡∏•‡∏±‡∏ö‡πÅ‡∏Ñ‡πà "‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡πÉ‡∏ô report" ‡∏ß‡πà‡∏≤‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏•‡πâ‡∏ß
- ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÉ‡∏ä‡πâ `shell` tool ‡∏´‡∏£‡∏∑‡∏≠ `file` tool ‡∏à‡∏£‡∏¥‡∏á

**‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á:**
```
AI ‡∏Ñ‡∏¥‡∏î: "‡∏â‡∏±‡∏ô‡∏Ñ‡∏ß‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á backup ‡∏ï‡∏≤‡∏° workflow"
AI ‡∏ó‡∏≥: ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡πÉ‡∏ô report "Backup: .smartspec/backups/spec.backup-20251204-000859.md"
AI ‡πÑ‡∏°‡πà‡∏ó‡∏≥: execute ‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á `cp spec.md .smartspec/backups/spec.backup-20251204-000859.md`
```

---

### 2. Workflow Instruction ‡πÑ‡∏°‡πà‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô‡∏û‡∏≠

**‡∏õ‡∏±‡∏ç‡∏´‡∏≤:**
- ‡πÅ‡∏°‡πâ‡∏à‡∏∞‡∏°‡∏µ "MUST EXECUTE" ‡πÅ‡∏ï‡πà AI ‡∏≠‡∏≤‡∏à‡πÑ‡∏°‡πà‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏ß‡πà‡∏≤‡∏ï‡πâ‡∏≠‡∏á execute ‡∏ï‡∏≠‡∏ô‡πÑ‡∏´‡∏ô
- ‡πÑ‡∏°‡πà‡∏°‡∏µ "BEFORE writing spec.md" ‡∏ó‡∏µ‡πà‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô‡∏û‡∏≠
- ‡πÑ‡∏°‡πà‡∏°‡∏µ "DO NOT proceed if backup fails" ‡∏ó‡∏µ‡πà‡πÄ‡∏Ç‡πâ‡∏°‡∏á‡∏ß‡∏î‡∏û‡∏≠

---

### 3. AI ‡πÑ‡∏°‡πà‡∏°‡∏µ Context ‡∏Ç‡∏≠‡∏á Working Directory

**‡∏õ‡∏±‡∏ç‡∏´‡∏≤:**
- AI ‡∏≠‡∏≤‡∏à‡πÑ‡∏°‡πà‡∏£‡∏π‡πâ‡∏ß‡πà‡∏≤‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô directory ‡πÑ‡∏´‡∏ô
- ‡πÑ‡∏°‡πà‡∏£‡∏π‡πâ‡∏ß‡πà‡∏≤ spec.md ‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏µ‡πà‡πÑ‡∏´‡∏ô
- ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ execute ‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡πÑ‡∏î‡πâ

---

## ‡πÅ‡∏ô‡∏ß‡∏ó‡∏≤‡∏á‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç

### Option 1: ‡πÄ‡∏û‡∏¥‡πà‡∏° Validation Step (‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥) ‚úÖ

**‡πÅ‡∏ô‡∏ß‡∏Ñ‡∏¥‡∏î:**
- ‡πÄ‡∏û‡∏¥‡πà‡∏° step ‡∏ó‡∏µ‡πà‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö‡πÉ‡∏´‡πâ AI ‡∏ï‡πâ‡∏≠‡∏á "‡∏û‡∏¥‡∏™‡∏π‡∏à‡∏ô‡πå" ‡∏ß‡πà‡∏≤‡∏™‡∏£‡πâ‡∏≤‡∏á backup ‡πÅ‡∏•‡πâ‡∏ß
- ‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô spec.md ‡πÉ‡∏´‡∏°‡πà AI ‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏™‡∏î‡∏á:
  1. Output ‡∏à‡∏≤‡∏Å `ls -la .smartspec/backups/`
  2. ‡∏ä‡∏∑‡πà‡∏≠‡πÑ‡∏ü‡∏•‡πå backup ‡∏ó‡∏µ‡πà‡∏™‡∏£‡πâ‡∏≤‡∏á
  3. ‡∏Ç‡∏ô‡∏≤‡∏î‡πÑ‡∏ü‡∏•‡πå backup
  4. Checksum ‡∏´‡∏£‡∏∑‡∏≠ first 3 lines ‡∏Ç‡∏≠‡∏á backup

**‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á Instruction:**
```markdown
**Step 5: Verify backup was created (MANDATORY PROOF)**

You MUST execute and show output:

```bash
# List backup files
ls -la .smartspec/backups/

# Verify specific backup exists
test -f ".smartspec/backups/${BACKUP_FILE}" && echo "‚úÖ EXISTS" || echo "‚ùå NOT FOUND"

# Show file size
ls -lh ".smartspec/backups/${BACKUP_FILE}"

# Show first 3 lines to prove it's the correct file
head -n 3 ".smartspec/backups/${BACKUP_FILE}"
```

**CRITICAL: If you cannot show this output, you MUST NOT proceed to write new spec.md**

Include this verification output in your response before writing new spec.md.
```

---

### Option 2: ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô Pre-execution Hook (‡∏ã‡∏±‡∏ö‡∏ã‡πâ‡∏≠‡∏ô)

**‡πÅ‡∏ô‡∏ß‡∏Ñ‡∏¥‡∏î:**
- ‡∏™‡∏£‡πâ‡∏≤‡∏á script ‡∏ó‡∏µ‡πà run ‡∏Å‡πà‡∏≠‡∏ô AI ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏≥‡∏á‡∏≤‡∏ô
- Script ‡∏à‡∏∞ backup ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
- AI ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏≥‡πÄ‡∏≠‡∏á

**‡∏õ‡∏±‡∏ç‡∏´‡∏≤:**
- ‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç infrastructure
- ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡πÅ‡∏Ñ‡πà‡πÅ‡∏Å‡πâ workflow

---

### Option 3: ‡πÄ‡∏û‡∏¥‡πà‡∏° "Show Me" Instruction (‡πÄ‡∏™‡∏£‡∏¥‡∏°)

**‡πÅ‡∏ô‡∏ß‡∏Ñ‡∏¥‡∏î:**
- ‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö‡πÉ‡∏´‡πâ AI ‡∏ï‡πâ‡∏≠‡∏á "‡πÅ‡∏™‡∏î‡∏á" output ‡∏à‡∏≤‡∏Å‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ó‡∏µ‡πà execute
- ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡πÅ‡∏Ñ‡πà‡∏ö‡∏≠‡∏Å‡∏ß‡πà‡∏≤‡∏ó‡∏≥‡πÅ‡∏•‡πâ‡∏ß

**‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á:**
```markdown
**IMPORTANT: You MUST show the actual output from executing these commands.**

DO NOT just say "Backup created". 
DO NOT just write "‚úÖ Backup verified" without showing proof.

You MUST show:
1. The exact shell command you executed
2. The actual output from that command
3. The file listing showing the backup exists
```

---

### Option 4: ‡πÄ‡∏û‡∏¥‡πà‡∏° Error Handling ‡∏ó‡∏µ‡πà‡πÄ‡∏Ç‡πâ‡∏°‡∏á‡∏ß‡∏î (‡πÄ‡∏™‡∏£‡∏¥‡∏°)

**‡πÅ‡∏ô‡∏ß‡∏Ñ‡∏¥‡∏î:**
- ‡∏ñ‡πâ‡∏≤ backup ‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à ‡∏ï‡πâ‡∏≠‡∏á STOP ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ
- ‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô spec.md ‡πÉ‡∏´‡∏°‡πà‡πÄ‡∏•‡∏¢

**‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á:**
```markdown
**CRITICAL ERROR HANDLING:**

If backup fails:
1. STOP immediately
2. DO NOT write new spec.md
3. Report error to user
4. Ask user to fix the issue
5. Exit with error

DO NOT continue if:
- .smartspec/backups/ directory cannot be created
- spec.md cannot be copied
- Backup file verification fails
```

---

## ‡πÅ‡∏ô‡∏ß‡∏ó‡∏≤‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å: Combination Approach

**‡∏£‡∏ß‡∏° Option 1 + 3 + 4:**

1. **Mandatory Proof** - ‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏™‡∏î‡∏á output ‡∏à‡∏£‡∏¥‡∏á
2. **Show Me** - ‡∏ï‡πâ‡∏≠‡∏á show ‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡πÅ‡∏•‡∏∞‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå
3. **Strict Error Handling** - ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡∏ï‡πâ‡∏≠‡∏á STOP

**Implementation:**
- ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç Section 13.5.1 ‡πÉ‡∏´‡πâ‡πÄ‡∏Ç‡πâ‡∏°‡∏á‡∏ß‡∏î‡∏Ç‡∏∂‡πâ‡∏ô
- ‡πÄ‡∏û‡∏¥‡πà‡∏° "PROOF REQUIRED" section
- ‡πÄ‡∏û‡∏¥‡πà‡∏° "SHOW OUTPUT" instruction
- ‡πÄ‡∏û‡∏¥‡πà‡∏° "STOP IF FAILED" rule

---

## ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á Instruction ‡∏ó‡∏µ‡πà‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÉ‡∏´‡∏°‡πà

```markdown
#### 13.5.1 Backup Existing SPEC (MANDATORY - MUST EXECUTE)

üö® **CRITICAL: This step MUST be executed before writing new spec.md** üö®

---

**INSTRUCTION FOR AI:**

You MUST perform the following backup steps using `shell` tool or `file` tool.

**‚ö†Ô∏è IMPORTANT: You MUST show the actual output from each command.**

---

**Step 1: Check if spec.md exists**

Execute:
```bash
test -f spec.md && echo "EXISTS" || echo "NOT_EXISTS"
```

**Show the output here.** If "NOT_EXISTS", skip to section 13.5.2.

---

**Step 2: Create backup directory**

Execute:
```bash
mkdir -p .smartspec/backups
ls -la .smartspec/
```

**Show the output here.** Verify that `.smartspec/backups/` directory exists.

---

**Step 3: Generate backup filename and copy file**

Execute:
```bash
TIMESTAMP=$(date +"%Y%m%d-%H%M%S")
BACKUP_FILE="spec.backup-${TIMESTAMP}.md"
cp spec.md ".smartspec/backups/${BACKUP_FILE}"
echo "Backup file: ${BACKUP_FILE}"
```

**Show the output here.** Note the backup filename.

---

**Step 4: Verify backup was created (MANDATORY PROOF)**

Execute ALL of these commands and show output:

```bash
# 1. List all backups
ls -lh .smartspec/backups/

# 2. Verify specific backup exists
test -f ".smartspec/backups/${BACKUP_FILE}" && echo "‚úÖ BACKUP EXISTS" || echo "‚ùå BACKUP FAILED"

# 3. Show file size
du -h ".smartspec/backups/${BACKUP_FILE}"

# 4. Show first 5 lines to prove it's correct
head -n 5 ".smartspec/backups/${BACKUP_FILE}"
```

**CRITICAL: You MUST show the output from ALL 4 commands above.**

If any command fails or shows "‚ùå BACKUP FAILED":
1. ‚ùå STOP immediately
2. ‚ùå DO NOT write new spec.md
3. ‚ùå Report error to user
4. ‚ùå Exit with error

---

**Step 5: Cleanup old backups (optional)**

Execute:
```bash
cd .smartspec/backups
ls -t spec.backup-*.md | tail -n +11 | xargs -r rm
ls -lh
cd ../..
```

**Show the output here.**

---

**‚úÖ PROOF REQUIRED:**

Before proceeding to section 13.5.2, you MUST have shown:
1. ‚úÖ Output from `ls -lh .smartspec/backups/`
2. ‚úÖ Message "‚úÖ BACKUP EXISTS"
3. ‚úÖ File size of backup
4. ‚úÖ First 5 lines of backup file

If you cannot show these 4 proofs, you MUST NOT proceed.

---

**‚ö†Ô∏è FINAL CHECK:**

Ask yourself:
- Did I actually execute the commands using `shell` tool?
- Did I show the actual output (not just say "done")?
- Did I verify the backup file exists?
- Did I show the first 5 lines of the backup?

If answer is NO to any question, GO BACK and execute properly.

---
```

---

## ‡∏™‡∏£‡∏∏‡∏õ

**‡∏õ‡∏±‡∏ç‡∏´‡∏≤:**
- AI ‡πÅ‡∏™‡∏î‡∏á‡∏ß‡πà‡∏≤‡∏™‡∏£‡πâ‡∏≤‡∏á backup ‡πÅ‡∏ï‡πà‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏ó‡∏≥‡∏à‡∏£‡∏¥‡∏á

**‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏:**
- AI "‡∏ö‡∏≠‡∏Å" ‡πÅ‡∏ï‡πà‡πÑ‡∏°‡πà "‡∏ó‡∏≥"
- Instruction ‡πÑ‡∏°‡πà‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô‡∏û‡∏≠
- ‡πÑ‡∏°‡πà‡∏°‡∏µ validation/proof requirement

**‡πÅ‡∏ô‡∏ß‡∏ó‡∏≤‡∏á‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç:**
- ‡πÄ‡∏û‡∏¥‡πà‡∏° "PROOF REQUIRED" section
- ‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö‡πÉ‡∏´‡πâ show output ‡∏à‡∏£‡∏¥‡∏á
- ‡πÄ‡∏û‡∏¥‡πà‡∏° verification steps
- ‡πÄ‡∏û‡∏¥‡πà‡∏° strict error handling

**‡∏ú‡∏•‡∏ó‡∏µ‡πà‡∏Ñ‡∏≤‡∏î‡∏´‡∏ß‡∏±‡∏á:**
- AI ‡∏à‡∏∞‡∏ï‡πâ‡∏≠‡∏á execute ‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏à‡∏£‡∏¥‡∏á
- AI ‡∏à‡∏∞‡∏ï‡πâ‡∏≠‡∏á show output ‡∏à‡∏£‡∏¥‡∏á
- AI ‡∏à‡∏∞‡∏ï‡πâ‡∏≠‡∏á verify ‡∏Å‡πà‡∏≠‡∏ô‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡πà‡∏≠
- ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡∏ï‡πâ‡∏≠‡∏á STOP

---

**Next Step:**
‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç Section 13.5.1 ‡∏ï‡∏≤‡∏°‡πÅ‡∏ô‡∏ß‡∏ó‡∏≤‡∏á‡∏Ç‡πâ‡∏≤‡∏á‡∏ï‡πâ‡∏ô
